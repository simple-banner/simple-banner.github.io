<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<!--<link rel="import" href="../../bower_components/iron-swipeable-container/iron-swipeable-container.html">-->
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/firebase-element/firebase-collection.html">
<link rel="import" href="../../bower_components/firebase-element/firebase-document.html">
<link rel="import" href="../../bower_components/neon-animated-pages/neon-animated-pages.html">
<link rel="import" href="../../bower_components/neon-animated-pages/neon-animations.html">
<link rel="import" href="../../bower_components/neon-animated-pages/neon-animatable.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">

<dom-module id="simple-banner">
  <template>
    <style>
      :host {
        display: block;
        overflow: hidden;
        @apply(--layout-fullbleed);
        @apply(--layout-vertical);
      }

      .toolbar {
        position: relative;

        padding: 8px;

        background-color: white;

        z-index: 12;
      }

      neon-animated-pages {
        @apply(--layout-flex);
      }

      neon-animatable {
        color: white;
        @apply(--layout-horizontal);
        @apply(--layout-center-center);
        @apply(--paper-font-display4);
      }

      neon-animatable:nth-child(1) {
        background: var(--paper-red-500);
      }

      neon-animatable:nth-child(2) {
        background: var(--paper-blue-500);
      }

      neon-animatable:nth-child(3) {
        background: var(--paper-orange-500);
      }

      neon-animatable:nth-child(4) {
        background: var(--paper-green-500);
      }

      neon-animatable:nth-child(5) {
        background: var(--paper-purple-500);
      }
    </style>

    <!--<template is="dom-bind">-->

    <firebase-document location="https://simple-carousel.firebaseio.com/images"
                       data="{{images}}"></firebase-document>

      <div class="toolbar">
        <button on-tap="_onPrevClick">&#8678;</button>
        <button on-tap="_onNextClick">&#8680;</button>
        <!--<button on-click="_onUpClick">&#8679;</button>-->
        <!--<button on-click="_onDownClick">&#8681;</button>-->
      </div>

      <neon-animated-pages id="pages" selected="0" entry-animation="[[entryAnimation]]" exit-animation="[[exitAnimation]]">
        <neon-animatable>

          <iron-image style="width:640px; height:320px; background-color: lightgray;"
                      sizing="cover" preload fade src="{{images.image1.value}}"></iron-image>

        </neon-animatable>
        <neon-animatable>2</neon-animatable>
        <neon-animatable>3</neon-animatable>
        <neon-animatable>4</neon-animatable>
        <neon-animatable>5</neon-animatable>
      </neon-animated-pages>

    <!--</template>-->



    <!--<iron-swipeable-container>-->
          <!--<paper-card class="presenter" heading="{{images.image1.text}}" image="{{images.image1.value}}" alt="[[images.image1.text]]">-->
        <!--</paper-card>-->
    <!--</iron-swipeable-container>-->

    <!--<paper-card class="controller" heading="{{images.image1.text}}" image="{{images.image1.value}}" alt="[[images.image1.text]]">-->
    <!--<div class="card-content">-->
      <!--<div class="cafe-header">Banner Publish Tool</div>-->
      <!--<p>Publish a new image source to the selected banner.</p>-->
      <!--&lt;!&ndash; <p class="cafe-light">Publish a new image source to the selected banner.</p> &ndash;&gt;-->
      <!--<paper-input placeholder="URL to image" value="{{firebaseImages.image1.value}}"></paper-input>-->
      <!--<paper-input placeholder="Banner text" value="{{firebaseImages.image1.text}}"></paper-input>-->
    <!--</div>-->
    <!--<div class="card-actions">-->
      <!--<p>Go Live at:</p>-->
      <!--<div class="horizontal justified">-->
        <!--<paper-icon-button icon="icons:event"></paper-icon-button>-->
        <!--<paper-button>Now</paper-button>-->
        <!--<paper-button>5:30PM</paper-button>-->
        <!--<paper-button>7:30PM</paper-button>-->
        <!--<paper-button>9:00PM</paper-button>-->
      <!--</div>-->
      <!--<paper-button class="cafe-reserve" on-tap="submit">Publish</paper-button>-->
    <!--</div>-->


  <!--</paper-card>-->



  <paper-toast id="mainToast" duration="5000" text="Content Published!">
    <paper-button on-tap="closeToast" class="yellow-button">Undo</paper-button>
  </paper-toast>

  </template>

  <script>
    Polymer({

      is: 'simple-banner',

      properties: {
        imgSrc: {
          type: String,
          notify: true,
          value: 'http://lorempixel.com/640/320'
        },

        firebaseImages: Object,

        images: {
          type: Array,
          computed: '_computeImages(firebaseImages)'
        },
        selected: {
          type: Number,
          value: 0
        }

      },
      _onNextClick: function () {
        this.$.pages.entryAnimation = 'slide-from-right-animation';
        this.$.pages.exitAnimation = 'slide-left-animation';
        this.$.pages.selectNext();
      },
      _onPrevClick: function () {
        this.$.pages.entryAnimation = 'slide-from-left-animation';
        this.$.pages.exitAnimation = 'slide-right-animation';
        this.$.pages.selectPrevious();
      },

      _computeImages: function(firebaseImages) {
        var imageArr = [];
        for(var imgObj in firebaseImages) {
          imageArr.push(firebaseImages[imgObj]);
        }
        return imageArr;
      },

      updateUrl: function() {
        console.log(this.url);
        console.log(this.imgSrc);
        this.imgSrc = this.url;
        console.log(this.imgSrc);
        document.querySelector('firebase-document').image1.value = this.imgSrc.value;
      },

      submit: function () {
        console.log('submit!');
        this.$.mainToast.open();
      },

      closeToast: function() {
        this.$.mainToast.close();
      }

    });
  </script>

</dom-module>
